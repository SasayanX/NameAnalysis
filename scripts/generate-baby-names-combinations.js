// äººæ°—ã®æ¼¢å­—ã‚’çµ„ã¿åˆã‚ã›ã¦åå‰ã‚’ç”Ÿæˆã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
const fs = require('fs');
const path = require('path');

// æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
const existingData = JSON.parse(fs.readFileSync(path.join(__dirname, '../data/baby-names.json'), 'utf8'));
const existingMaleNames = new Set(existingData.male.map(n => n.kanji));
const existingFemaleNames = new Set(existingData.female.map(n => n.kanji));

// äººæ°—ã®æ¼¢å­—ï¼ˆ1æ–‡å­—ç›®ï¼‰
const popularFirstKanji = {
  male: ['å¤§', 'é™½', 'æ‚ ', 'çµ', 'è’¼', 'ç¿”', 'é¢¯', 'æµ·', 'æ¹Š', 'ç‰', 'æ™´', 'å„ª', 'å’Œ', 'ç¿¼', 'å…‰', 'æ…¶', 'èª ', 'éš¼', 'å¿«', 'è¼', 'æœ—', 'å¥', 'é™¸', 'è‘µ', 'æ¥“', 'æ­©', 'ç†', 'ç‘›', 'ä¸€', 'ç‘›', 'å¥', 'å¾‹', 'æš–', 'æ€œ', 'è’¼', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯'],
  female: ['ç¾', 'å¿ƒ', 'é™½', 'çµ', 'èŠ±', 'æ„›', 'è‰', 'å’²', 'æ¡œ', 'æŸš', 'æœ±', 'æ', 'æœˆ', 'æ¥“', 'å’Œ', 'è¯', 'ç™¾', 'ç´—', 'æ˜', 'é¢¨', 'ç¾½', 'è‘‰', 'èŒ‰', 'å¸†', 'èœ', 'ç²', 'å¥ˆ', 'å¸Œ', 'å‡ª', 'å½©', 'æ—¥', 'å®Ÿ', 'ç´', 'åƒ', 'å¤', 'ä¹™', 'éŸ³', 'å¤¢', 'ç©‚', 'é¦™', 'ç¯', 'ç´¬', 'ç¿ ', 'å‡›', 'èŠ½', 'è‘µ', 'é™½', 'çµ', 'å’²', 'æ¾ª', 'è©©', 'æ„›', 'ç·’']
};

// äººæ°—ã®æ¼¢å­—ï¼ˆ2æ–‡å­—ç›®ï¼‰
const popularSecondKanji = {
  male: ['ç¿”', 'å¤ª', 'æ–—', 'äºº', 'çœŸ', 'å¤§', 'ç©º', 'æ±°', 'å¸Œ', 'é›…', 'ä»', 'ä»‹', 'å¸', 'å“‰', 'ä½œ', 'å²', 'å¿—', 'ç”Ÿ', 'è¼', 'ä½‘', 'é›„', 'å¥', 'æ‹“', 'å®', 'æ²»', 'åš', 'éš†', 'è²´', 'ç§€', 'ç›´', 'æ­¦', 'é”', 'æ˜', 'æ†²', 'æ­£', 'ç¿”', 'å¤ª', 'æ–—', 'äºº', 'çœŸ', 'å¤§', 'ç©º', 'æ±°', 'å¸Œ', 'é›…', 'ä»', 'ä»‹', 'å¸', 'å“‰', 'ä½œ', 'å²', 'å¿—', 'ç”Ÿ', 'è¼', 'ä½‘', 'é›„', 'å¥', 'æ‹“', 'å®', 'æ²»', 'åš', 'éš†', 'è²´', 'ç§€', 'ç›´', 'æ­¦', 'é”', 'æ˜', 'æ†²', 'æ­£'],
  female: ['ä¾', 'å­', 'å¥ˆ', 'ç¾', 'éŸ³', 'æœˆ', 'èŠ±', 'èœ', 'çµ', 'æ„›', 'å®Ÿ', 'æœ›', 'å”¯', 'ç†', 'é™½', 'ä¹ƒ', 'å¸Œ', 'å¸†', 'è‘µ', 'å¿ƒ', 'æ¡œ', 'ç´', 'æ™´', 'éˆ´', 'è‰¯', 'è‰', 'å¸†', 'èŒ‰', 'æ„›', 'èŠ±', 'å®Ÿ', 'å¿ƒ', 'éŸ³', 'èœ', 'å’²', 'èŠ±', 'å¤¢', 'å¿ƒ', 'èœ', 'å’²', 'èŠ±', 'ä¾', 'å­', 'å¥ˆ', 'ç¾', 'éŸ³', 'æœˆ', 'èŠ±', 'èœ', 'çµ', 'æ„›', 'å®Ÿ', 'æœ›', 'å”¯', 'ç†', 'é™½', 'ä¹ƒ', 'å¸Œ', 'å¸†', 'è‘µ', 'å¿ƒ', 'æ¡œ', 'ç´', 'æ™´', 'éˆ´', 'è‰¯', 'è‰', 'å¸†', 'èŒ‰', 'æ„›', 'èŠ±', 'å®Ÿ', 'å¿ƒ', 'éŸ³', 'èœ', 'å’²', 'èŠ±']
};

// 1æ–‡å­—åï¼ˆäººæ°—ã®æ¼¢å­—ï¼‰
const singleKanji = {
  male: ['ç¢§', 'è“®', 'æ¹Š', 'è’¼', 'æ¨¹', 'ç¿”', 'ç¿¼', 'å…‰', 'æ…¶', 'èª ', 'éš¼', 'é¢¯', 'æ™´', 'å¿«', 'è¼', 'é™½', 'æ‚ ', 'å¥', 'å¾‹', 'æš–', 'æ€œ', 'é™¸', 'è‘µ', 'æ¥“', 'æ­©', 'ç†', 'å¥', 'ç‘›', 'æœ—', 'å¥', 'å„ª', 'å’Œ', 'ç‰', 'æ¹Š', 'ç¿”', 'é¢¯', 'ç…Œ', 'åœ­', 'é§¿', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯', 'é¢¯'],
  female: ['ç´¬', 'ç¿ ', 'å‡›', 'èŠ½', 'è‘µ', 'å¿ƒ', 'é™½', 'èœ', 'ç¾', 'å’²', 'æ¡œ', 'çµ', 'è‰', 'æ¾ª', 'è©©', 'æ„›', 'ç·’', 'æŸš', 'æœ±', 'èŠ±', 'éŸ³', 'æ', 'æœˆ', 'æ¥“', 'èŠ±', 'å’Œ', 'è¯', 'ç™¾', 'å’²', 'ç´—', 'æ˜', 'é¢¨', 'ç¾½', 'è‘‰', 'æ„›', 'èŒ‰', 'å¸†', 'èœ', 'æœˆ', 'ç²', 'å¥ˆ', 'å¸Œ', 'å‡ª', 'å½©', 'æ—¥', 'å¿ƒ', 'å®Ÿ', 'ç´', 'åƒ', 'å¤', 'ä¹™', 'éŸ³', 'å¤¢', 'ç©‚', 'é¦™', 'ç¯', 'ç´¬', 'ç¿ ', 'å‡›', 'èŠ½', 'è‘µ', 'å¿ƒ', 'é™½', 'èœ', 'ç¾', 'å’²', 'æ¡œ', 'çµ', 'è‰', 'æ¾ª', 'è©©', 'æ„›', 'ç·’', 'æŸš', 'æœ±', 'èŠ±', 'éŸ³', 'æ', 'æœˆ', 'æ¥“', 'èŠ±', 'å’Œ', 'è¯', 'ç™¾', 'å’²', 'ç´—', 'æ˜', 'é¢¨', 'ç¾½', 'è‘‰', 'æ„›', 'èŒ‰', 'å¸†', 'èœ', 'æœˆ', 'ç²', 'å¥ˆ', 'å¸Œ', 'å‡ª', 'å½©', 'æ—¥', 'å¿ƒ', 'å®Ÿ', 'ç´', 'åƒ', 'å¤', 'ä¹™', 'éŸ³', 'å¤¢', 'ç©‚', 'é¦™', 'ç¯']
};

// èª­ã¿æ–¹ã®ãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆç°¡æ˜“ç‰ˆï¼‰
const readingMap = {
  'å¤§': 'ã ã„', 'é™½': 'ã‚ˆã†', 'æ‚ ': 'ã‚†ã†', 'çµ': 'ã‚†ã„', 'è’¼': 'ãã†', 'ç¿”': 'ã—ã‚‡ã†', 'é¢¯': 'ã¯ã‚„ã¦', 'æµ·': 'ã‹ã„', 'æ¹Š': 'ã¿ãªã¨',
  'ç‰': 'ã‚Šã‚…ã†', 'æ™´': 'ã¯ã‚‹', 'å„ª': 'ã‚†ã†', 'å’Œ': 'ã‚', 'ç¿¼': 'ã¤ã°ã•', 'å…‰': 'ã²ã‹ã‚Š', 'æ…¶': 'ã‘ã„', 'èª ': 'ã¾ã“ã¨', 'éš¼': 'ã—ã‚…ã‚“',
  'å¿«': 'ã‹ã„', 'è¼': 'ã', 'æœ—': 'ã‚ã†', 'å¥': 'ã‘ã‚“', 'é™¸': 'ã‚Šã', 'è‘µ': 'ã‚ãŠã„', 'æ¥“': 'ã‹ãˆã§', 'æ­©': 'ã‚ã‚†ã‚€', 'ç†': 'ã‚Š', 'ç‘›': 'ãˆã„',
  'ç¾': 'ã¿', 'å¿ƒ': 'ã“ã“ã‚', 'èŠ±': 'ã¯ãª', 'æ„›': 'ã‚ã„', 'è‰': 'ã‚Š', 'å’²': 'ã•ã', 'æ¡œ': 'ã•ãã‚‰', 'æŸš': 'ã‚†ãš', 'æœ±': 'ã‚ã‹ã‚Š',
  'æ': 'ã‚ã‚“', 'æœˆ': 'ã¤ã', 'å’Œ': 'ã‚', 'è¯': 'ã¯ãª', 'ç™¾': 'ã‚‚ã‚‚', 'ç´—': 'ã•ã‚‰', 'æ˜': 'ã‚ã', 'é¢¨': 'ã‹ãœ', 'ç¾½': 'ã¯ã­', 'è‘‰': 'ã¯',
  'èŒ‰': 'ã¾', 'å¸†': 'ã»', 'èœ': 'ãª', 'ç²': 'ã‚Œã„', 'å¥ˆ': 'ãª', 'å¸Œ': 'ã', 'å‡ª': 'ãªã', 'å½©': 'ã‚ã‚„', 'æ—¥': 'ã²', 'å®Ÿ': 'ã¿', 'ç´': 'ã“ã¨',
  'åƒ': 'ã¡', 'å¤': 'ãªã¤', 'ä¹™': 'ãŠã¨', 'éŸ³': 'ãŠã¨', 'å¤¢': 'ã‚†ã‚', 'ç©‚': 'ã»', 'é¦™': 'ã‹', 'ç¯': 'ã‚ã‹ã‚Š'
};

function getReading(kanji) {
  if (kanji.length === 1) {
    return readingMap[kanji] || kanji;
  }
  // 2æ–‡å­—ã®å ´åˆã¯ç°¡æ˜“çš„ã«çµ„ã¿åˆã‚ã›
  return (readingMap[kanji[0]] || kanji[0]) + (readingMap[kanji[1]] || kanji[1]);
}

function getMeaning(kanji) {
  const meanings = {
    'ç¢§': 'ç¾ã—ã„é’ç·‘è‰²', 'è“®': 'è“®ã®èŠ±ã®ã‚ˆã†ã«æ¸…ã‚‰ã‹', 'æ¹Š': 'äººãŒé›†ã¾ã‚‹æ¸¯', 'è’¼': 'åºƒã„ç©ºã®ã‚ˆã†ã«',
    'æ¨¹': 'å¤§æ¨¹ã®ã‚ˆã†ã«æˆé•·', 'ç¿”': 'å¤§ç©ºã«ç¿”ã‘ã‚‹', 'ç¿¼': 'ç¿¼ã‚’æŒã£ã¦é£›ã¶', 'å…‰': 'å…‰ã®ã‚ˆã†ã«æ˜ã‚‹ã',
    'æ…¶': 'æ…¶ã³ã«æº€ã¡ãŸ', 'èª ': 'èª å®Ÿã«', 'éš¼': 'ç´ æ—©ã„', 'é¢¯': 'é¢¯çˆ½ã¨', 'æ™´': 'æ™´ã‚Œã‚„ã‹ã«',
    'å¿«': 'å¿«æ´»ã«', 'è¼': 'è¼ã‹ã—ã', 'é™½': 'å¤ªé™½ã®ã‚ˆã†ã«', 'æ‚ ': 'ã‚†ã£ãŸã‚Šã¨', 'å¥': 'ç¾ã—ã„éŸ³ã‚’å¥ã§ã‚‹',
    'å¾‹': 'è¦å‰‡æ­£ã—ã', 'æš–': 'æš–ã‹ã', 'æ€œ': 'è¡æ˜ã§', 'é™¸': 'å¤§åœ°ã«ã—ã£ã‹ã‚Šã¨', 'è‘µ': 'å¤ªé™½ã«å‘ã‹ã†',
    'æ¥“': 'ç¾ã—ã„ç´…è‘‰', 'æ­©': 'ä¸€æ­©ä¸€æ­©é€²ã‚€', 'ç†': 'é“ç†ã‚’ã‚ãã¾ãˆã‚‹', 'å¥': 'å¥åº·ã«', 'ç‘›': 'ç¾ã—ã„å®çŸ³',
    'æœ—': 'æ˜ã‚‹ã', 'å„ª': 'å„ªã—ã', 'å’Œ': 'å’Œã‚„ã‹ã«', 'ç‰': 'ç¾ã—ã',
    'ç´¬': 'ä¸Šè³ªãªç¹”ç‰©ã®ã‚ˆã†ã«', 'ç¿ ': 'ç¾ã—ã„ç·‘', 'å‡›': 'å‡›ã¨ã—ãŸå“æ ¼', 'èŠ½': 'æ–°ã—ã„èŠ½',
    'å¿ƒ': 'å¿ƒãŒå„ªã—ã', 'èœ': 'è‡ªç„¶ã®æµã¿', 'ç¾': 'ç¾ã—ã', 'å’²': 'ç¾ã—ãå’²ã', 'æ¡œ': 'æ¡œã®èŠ±ã®ã‚ˆã†ã«',
    'çµ': 'çµã°ã‚Œã‚‹', 'è‰': 'ç¾ã—ã„', 'æ¾ª': 'ç¾ã—ã„æ°´è·¯', 'è©©': 'ç¾ã—ã„è©©', 'æ„›': 'æ„›ã‚‰ã—ã',
    'ç·’': 'ç¾ã—ã„ç·’', 'æŸš': 'æŸšå­ã®ã‚ˆã†ã«', 'æœ±': 'èµ¤ãç¾ã—ã„', 'èŠ±': 'èŠ±ã®ã‚ˆã†ã«', 'éŸ³': 'ç¾ã—ã„éŸ³',
    'æ': 'æã®å®Ÿ', 'æœˆ': 'ç¾ã—ã„æœˆ', 'è¯': 'è¯ã‚„ã‹ã«', 'ç´—': 'ä¸Šå“ãª', 'é¢¨': 'çˆ½ã‚„ã‹ãªé¢¨',
    'ç¾½': 'ç¾ã—ã„ç¾½', 'è‘‰': 'ç¾ã—ã„è‘‰', 'èŒ‰': 'ç¾ã—ã', 'å¸†': 'å¸Œæœ›ã®å¸†', 'ç²': 'ç¾ã—ã',
    'å‡ª': 'ç©ã‚„ã‹ã«', 'å½©': 'å½©ã‚‰ã‚ŒãŸ', 'å®Ÿ': 'å®Ÿã‚Šã®', 'ç´': 'ç¾ã—ã„ç´', 'åƒ': 'å¤šãã®',
    'å¤': 'å¤ã®ã‚ˆã†ã«', 'ä¹™': 'ä¹™å¥³ã®ã‚ˆã†ã«', 'å¤¢': 'å¤¢ã®ã‚ˆã†ã«', 'ç©‚': 'ç©‚ã®ã‚ˆã†ã«', 'é¦™': 'é¦™ã‚Šè±Šã‹ã«',
    'ç¯': 'ç¯ã‚Šã®ã‚ˆã†ã«'
  };
  
  if (kanji.length === 1) {
    return meanings[kanji] || `${kanji}ã®æ„å‘³`;
  }
  
  // 2æ–‡å­—ã®å ´åˆã¯çµ„ã¿åˆã‚ã›ã¦æ„å‘³ã‚’ç”Ÿæˆ
  const first = meanings[kanji[0]] || kanji[0];
  const second = meanings[kanji[1]] || kanji[1];
  return `${first}${second}`;
}

// åå‰ã‚’ç”Ÿæˆ
function generateNames() {
  const newMale = [];
  const newFemale = [];
  
  // 1æ–‡å­—åå‰ã‚’ç”Ÿæˆ
  singleKanji.male.forEach(kanji => {
    if (!existingMaleNames.has(kanji) && newMale.length < 500) {
      newMale.push({
        kanji: kanji,
        reading: getReading(kanji),
        meaning: getMeaning(kanji)
      });
      existingMaleNames.add(kanji);
    }
  });
  
  singleKanji.female.forEach(kanji => {
    if (!existingFemaleNames.has(kanji) && newFemale.length < 500) {
      newFemale.push({
        kanji: kanji,
        reading: getReading(kanji),
        meaning: getMeaning(kanji)
      });
      existingFemaleNames.add(kanji);
    }
  });
  
  // 2æ–‡å­—åå‰ã‚’ç”Ÿæˆï¼ˆçµ„ã¿åˆã‚ã›ï¼‰
  let combinations = 0;
  for (const first of popularFirstKanji.male) {
    for (const second of popularSecondKanji.male) {
      if (combinations >= 750) break; // åˆ¶é™
      const kanji = first + second;
      if (!existingMaleNames.has(kanji) && newMale.length < 1000) {
        newMale.push({
          kanji: kanji,
          reading: getReading(kanji),
          meaning: getMeaning(kanji)
        });
        existingMaleNames.add(kanji);
        combinations++;
      }
    }
    if (combinations >= 750) break;
  }
  
  combinations = 0;
  for (const first of popularFirstKanji.female) {
    for (const second of popularSecondKanji.female) {
      if (combinations >= 750) break; // åˆ¶é™
      const kanji = first + second;
      if (!existingFemaleNames.has(kanji) && newFemale.length < 1000) {
        newFemale.push({
          kanji: kanji,
          reading: getReading(kanji),
          meaning: getMeaning(kanji)
        });
        existingFemaleNames.add(kanji);
        combinations++;
      }
    }
    if (combinations >= 750) break;
  }
  
  return { male: newMale, female: newFemale };
}

const generated = generateNames();

// æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã«è¿½åŠ 
const expandedData = {
  male: [...existingData.male, ...generated.male],
  female: [...existingData.female, ...generated.female]
};

console.log(`\nğŸ“ˆ ç”Ÿæˆçµæœ:`);
console.log(`ç”Ÿæˆ: ç”·æ€§ ${generated.male.length}å, å¥³æ€§ ${generated.female.length}å`);
console.log(`æ‹¡å……å‰: ç”·æ€§ ${existingData.male.length}å, å¥³æ€§ ${existingData.female.length}å (åˆè¨ˆ ${existingData.male.length + existingData.female.length}å)`);
console.log(`æ‹¡å……å¾Œ: ç”·æ€§ ${expandedData.male.length}å, å¥³æ€§ ${expandedData.female.length}å (åˆè¨ˆ ${expandedData.male.length + expandedData.female.length}å)`);

// æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
fs.writeFileSync(
  path.join(__dirname, '../data/baby-names.json'),
  JSON.stringify(expandedData, null, 2),
  'utf8'
);

console.log(`\nâœ… åå‰ãƒ‡ãƒ¼ã‚¿ã®æ‹¡å……ãŒå®Œäº†ã—ã¾ã—ãŸï¼`);

