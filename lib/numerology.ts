// 数秘術計算ライブラリ（漢字対応版）

export interface NumerologyResult {
  lifePathNumber: number
  destinyNumber: number
  soulNumber: number
  personalityNumber: number
  maturityNumber: number
  birthdayNumber: number
  interpretations: {
    lifePath: string
    destiny: string
    soul: string
    personality: string
    maturity: string
    birthday: string
  }
}

// 漢字の読み仮名変換マップ（拡張版）
const KANJI_READING_MAP: { [key: string]: string } = {
  // 金属・自然系
  金: "きん",
  銀: "ぎん",
  鉄: "てつ",
  銅: "どう",
  雨: "あめ",
  雪: "ゆき",
  風: "かぜ",
  火: "ひ",
  水: "みず",
  土: "つち",
  木: "き",
  石: "いし",
  山: "やま",
  川: "かわ",
  海: "うみ",
  空: "そら",
  星: "ほし",
  月: "つき",
  日: "ひ",
  光: "ひかり",

  // 人名用漢字（男性）
  太: "た",
  郎: "ろう",
  男: "お",
  雄: "お",
  夫: "お",
  彦: "ひこ",
  介: "すけ",
  助: "すけ",
  輔: "すけ",
  一: "いち",
  二: "に",
  三: "さん",
  四: "し",
  五: "ご",
  六: "ろく",
  七: "なな",
  八: "はち",
  九: "きゅう",
  十: "じゅう",

  // 人名用漢字（女性）
  子: "こ",
  美: "み",
  花: "はな",
  桜: "さくら",
  愛: "あい",
  恵: "めぐみ",
  香: "か",
  里: "り",
  奈: "な",
  菜: "な",
  葉: "は",

  // 姓用漢字
  田: "た",
  中: "なか",
  山: "やま",
  川: "かわ",
  木: "き",
  林: "はやし",
  森: "もり",
  石: "いし",
  井: "い",
  上: "うえ",
  下: "した",
  前: "まえ",
  後: "うしろ",
  左: "ひだり",
  右: "みぎ",
  東: "ひがし",
  西: "にし",
  南: "みなみ",
  北: "きた",

  // 追加の一般的な漢字
  大: "だい",
  小: "しょう",
  高: "たか",
  安: "やす",
  長: "なが",
  新: "しん",
  古: "ふる",
  若: "わか",
  老: "ろう",
  強: "つよ",
  弱: "よわ",
  明: "あき",
  暗: "くら",
  白: "しろ",
  黒: "くろ",
  赤: "あか",
  青: "あお",
  黄: "き",
  緑: "みどり",
  紫: "むらさき",

  // 動作・状態
  立: "たつ",
  座: "すわ",
  走: "はし",
  歩: "ある",
  飛: "とぶ",
  泳: "およ",
  笑: "わら",
  泣: "な",
  歌: "うた",
  踊: "おど",

  // 感情・性格
  優: "やさ",
  厳: "きび",
  温: "あたた",
  冷: "つめ",
  熱: "あつ",
  涼: "すず",
  静: "しず",
  動: "うご",
  速: "はや",
  遅: "おそ",

  // 假屋崎省吾用の追加
  假: "か", // 仮の旧字体
  屋: "や",
  崎: "さき",
  省: "しょう",
  吾: "ご",

  // その他よく使われる漢字
  人: "じん",
  学: "がく",
  生: "せい",
  先: "せん",
  本: "ほん",
  国: "こく",
  会: "かい",
  社: "しゃ",
  業: "ぎょう",
  事: "じ",
  物: "もの",
  者: "しゃ",
  方: "ほう",
  手: "て",
  心: "こころ",
  思: "おも",
  考: "かんが",
  見: "み",
  聞: "き",
  言: "い",
  話: "はな",
  読: "よ",
  書: "か",
  作: "つく",
  使: "つか",
  来: "く",
  行: "い",
  帰: "かえ",
  入: "はい",
  出: "で",
  開: "ひら",
  閉: "し",
  始: "はじ",
  終: "お",
  早: "はや",
  遅: "おそ",
  多: "おお",
  少: "すく",
  良: "よ",
  悪: "わる",
  正: "ただ",
  間: "ま",
  違: "ちが",
  同: "おな",
  別: "べつ",
  近: "ちか",
  遠: "とお",
  今: "いま",
  昔: "むかし",
  時: "とき",
  年: "とし",
  月: "つき",
  週: "しゅう",
  毎: "まい",
  次: "つぎ",
  最: "もっと",
  初: "はじ",
  終: "おわ",
}

// 正しい数秘術の文字数値マッピング
const LETTER_VALUES: { [key: string]: number } = {
  // アルファベット（標準的な数秘術体系）
  A: 1,
  B: 2,
  C: 3,
  D: 4,
  E: 5,
  F: 6,
  G: 7,
  H: 8,
  I: 9,
  J: 1,
  K: 2,
  L: 3,
  M: 4,
  N: 5,
  O: 6,
  P: 7,
  Q: 8,
  R: 9,
  S: 1,
  T: 2,
  U: 3,
  V: 4,
  W: 5,
  X: 6,
  Y: 7,
  Z: 8,

  // 日本語（正しい音韻体系による数値マッピング）
  // あ行
  あ: 1,
  い: 1,
  う: 1,
  え: 1,
  お: 1,
  ア: 1,
  イ: 1,
  ウ: 1,
  エ: 1,
  オ: 1,

  // か行
  か: 2,
  き: 2,
  く: 2,
  け: 2,
  こ: 2,
  が: 2,
  ぎ: 2,
  ぐ: 2,
  げ: 2,
  ご: 2,
  カ: 2,
  キ: 2,
  ク: 2,
  ケ: 2,
  コ: 2,
  ガ: 2,
  ギ: 2,
  グ: 2,
  ゲ: 2,
  ゴ: 2,

  // さ行
  さ: 3,
  し: 3,
  す: 3,
  せ: 3,
  そ: 3,
  ざ: 3,
  じ: 3,
  ず: 3,
  ぜ: 3,
  ぞ: 3,
  サ: 3,
  シ: 3,
  ス: 3,
  セ: 3,
  ソ: 3,
  ザ: 3,
  ジ: 3,
  ズ: 3,
  ゼ: 3,
  ゾ: 3,

  // た行
  た: 4,
  ち: 4,
  つ: 4,
  て: 4,
  と: 4,
  だ: 4,
  ぢ: 4,
  づ: 4,
  で: 4,
  ど: 4,
  タ: 4,
  チ: 4,
  ツ: 4,
  テ: 4,
  ト: 4,
  ダ: 4,
  ヂ: 4,
  ヅ: 4,
  デ: 4,
  ド: 4,

  // な行
  な: 5,
  に: 5,
  ぬ: 5,
  ね: 5,
  の: 5,
  ナ: 5,
  ニ: 5,
  ヌ: 5,
  ネ: 5,
  ノ: 5,

  // は行
  は: 6,
  ひ: 6,
  ふ: 6,
  へ: 6,
  ほ: 6,
  ば: 6,
  び: 6,
  ぶ: 6,
  べ: 6,
  ぼ: 6,
  ぱ: 6,
  ぴ: 6,
  ぷ: 6,
  ぺ: 6,
  ぽ: 6,
  ハ: 6,
  ヒ: 6,
  フ: 6,
  ヘ: 6,
  ホ: 6,
  バ: 6,
  ビ: 6,
  ブ: 6,
  ベ: 6,
  ボ: 6,
  パ: 6,
  ピ: 6,
  プ: 6,
  ペ: 6,
  ポ: 6,

  // ま行
  ま: 7,
  み: 7,
  む: 7,
  め: 7,
  も: 7,
  マ: 7,
  ミ: 7,
  ム: 7,
  メ: 7,
  モ: 7,

  // や行
  や: 8,
  ゆ: 8,
  よ: 8,
  ヤ: 8,
  ユ: 8,
  ヨ: 8,

  // ら行
  ら: 9,
  り: 9,
  る: 9,
  れ: 9,
  ろ: 9,
  ラ: 9,
  リ: 9,
  ル: 9,
  レ: 9,
  ロ: 9,

  // わ行
  わ: 1,
  ゐ: 1,
  ゑ: 1,
  を: 1,
  ん: 5,
  ワ: 1,
  ヰ: 1,
  ヱ: 1,
  ヲ: 1,
  ン: 5,

  // 小文字
  ゃ: 8,
  ゅ: 8,
  ょ: 8,
  っ: 4,
  ャ: 8,
  ュ: 8,
  ョ: 8,
  ッ: 4,
}

// 母音の定義（日本語も含む）
const VOWELS = ["A", "E", "I", "O", "U", "あ", "い", "う", "え", "お", "ア", "イ", "ウ", "エ", "オ"]

// 漢字を読み仮名に変換する関数（改良版）
function convertKanjiToReading(text: string): string {
  let result = ""
  let hasUnknownChars = false

  for (const char of text) {
    if (KANJI_READING_MAP[char]) {
      result += KANJI_READING_MAP[char]
    } else if (/[\u4E00-\u9FAF]/.test(char)) {
      // 漢字だが読み方が不明な場合
      hasUnknownChars = true
      // デフォルトの読み方を割り当て（音読み風）
      result += "か" // デフォルト値として「か」を使用
    } else {
      result += char // 漢字でない場合はそのまま
    }
  }

  // 警告を出すが、処理は続行
  if (hasUnknownChars && process.env.NODE_ENV === "development") {
    console.warn(`数秘術: 一部の漢字の読み方が不明です: ${text} -> ${result}`)
  }

  return result
}

// マスターナンバーを考慮した数字還元
function reduceToSingleDigit(num: number): number {
  if (num === 11 || num === 22 || num === 33) return num

  while (num > 9) {
    let sum = 0
    const numStr = num.toString()
    for (let i = 0; i < numStr.length; i++) {
      sum += Number.parseInt(numStr[i])
    }
    num = sum
    if (num === 11 || num === 22 || num === 33) return num
  }

  return num
}

// 文字列から数値を計算（漢字対応版・改良版）
function calculateNameValue(name: string, vowelsOnly = false, consonantsOnly = false): number {
  // 漢字を読み仮名に変換
  const convertedName = convertKanjiToReading(name)
  const cleanName = convertedName.toUpperCase().replace(/[^A-Zあ-んア-ン]/g, "")

  if (cleanName.length === 0) {
    // 変換に失敗した場合でも、デフォルト値を返す
    return 1
  }

  let total = 0

  for (const char of cleanName) {
    // 母音のみの場合
    if (vowelsOnly && !VOWELS.includes(char)) continue
    // 子音のみの場合
    if (consonantsOnly && VOWELS.includes(char)) continue

    const value = LETTER_VALUES[char]
    if (value) {
      total += value
    }
  }

  // 計算結果が0の場合はデフォルト値を返す
  if (total === 0) {
    return 1
  }

  return reduceToSingleDigit(total)
}

// 1. ライフパス数（運命数）
export function calculateLifePathNumber(birthdate: Date): number {
  const year = birthdate.getFullYear()
  const month = birthdate.getMonth() + 1
  const day = birthdate.getDate()

  // 正しい数秘術の計算方法：全ての数字を個別に足す
  let total = 0

  // 年の各桁を足す
  const yearStr = year.toString()
  for (const digit of yearStr) {
    total += Number.parseInt(digit)
  }

  // 月の各桁を足す
  const monthStr = month.toString()
  for (const digit of monthStr) {
    total += Number.parseInt(digit)
  }

  // 日の各桁を足す
  const dayStr = day.toString()
  for (const digit of dayStr) {
    total += Number.parseInt(digit)
  }

  return reduceToSingleDigit(total)
}

// 2. ディスティニー数（表現数・使命数）
export function calculateDestinyNumber(fullName: string): number {
  return calculateNameValue(fullName)
}

// 3. ソウル数（ハート数）
export function calculateSoulNumber(fullName: string): number {
  return calculateNameValue(fullName, true, false)
}

// 4. パーソナリティ数
export function calculatePersonalityNumber(fullName: string): number {
  return calculateNameValue(fullName, false, true)
}

// 5. マチュリティ数
export function calculateMaturityNumber(lifePathNumber: number, destinyNumber: number): number {
  return reduceToSingleDigit(lifePathNumber + destinyNumber)
}

// 6. バースデー数
export function calculateBirthdayNumber(birthdate: Date): number {
  const day = birthdate.getDate()
  if (day === 11 || day === 22) return day
  return day > 9 ? reduceToSingleDigit(day) : day
}

// 数秘術の解釈
const INTERPRETATIONS = {
  lifePath: {
    1: "リーダーシップと独立心に満ちた人生の道筋。新しい道を切り開き、他者を導く使命があります。創造性と決断力で困難を乗り越え、自分らしい人生を築いていきます。",
    2: "協調性と調和を重視する人生のテーマ。人との繋がりを大切にし、平和と安定をもたらす使命があります。感受性豊かで、他者をサポートする才能に恵まれています。",
    3: "創造性と表現力豊かな人生の方向性。芸術や創作活動で才能を発揮し、人々に喜びと感動を与える使命があります。コミュニケーション能力に長け、明るいエネルギーを持っています。",
    4: "安定と秩序を築く堅実な人生のテーマ。確実で信頼できる基盤を作り、社会に貢献する使命があります。忍耐力と実行力で着実に目標を達成していきます。",
    5: "自由と冒険を求める変化に富んだ人生の道筋。多様な経験を通じて成長し、新しい可能性を開拓する使命があります。好奇心旺盛で、変化を恐れない柔軟性を持っています。",
    6: "愛と責任感に満ちた奉仕の人生テーマ。家族や共同体への深い愛情で人々を支え、癒しをもたらす使命があります。思いやり深く、他者の幸福を自分の喜びとします。",
    7: "探求と精神性を重視する深遠な人生の方向性。真理を追求し、深い洞察力で物事の本質を見抜く使命があります。内省的で、精神的な成長を重視します。",
    8: "物質的成功と権力を追求する実力主義の人生テーマ。ビジネスや組織運営で力を発揮し、社会に大きな影響を与える使命があります。野心的で、目標達成への強い意志を持っています。",
    9: "人道主義と奉仕の博愛的な人生の道筋。世界をより良い場所にするための活動に従事し、人類全体の幸福に貢献する使命があります。寛大で理想主義的な性格です。",
    11: "【マスターナンバー】直感力と霊性に優れた特別な人生のテーマ。高次の意識と繋がり、人々を精神的に導く使命があります。感受性が強く、インスピレーションを与える力を持っています。",
    22: "【マスターナンバー】大きな夢を現実化するマスタービルダーの人生の方向性。壮大なビジョンを具現化し、社会に永続的な影響を与える使命があります。実現力と組織力に優れています。",
    33: "【マスターナンバー】無条件の愛と癒しのマスターティーチャーの人生テーマ。人類全体への奉仕が最高の使命であり、愛と慈悲で世界を癒す力を持っています。",
  },
  destiny: {
    1: "リーダーとしての社会的役割。独創性と決断力で新しい道を切り開き、他者を導く使命があります。起業家精神と革新的なアイデアで社会に貢献します。",
    2: "協力者・調整役としての社会的使命。調和と平和をもたらし、人々の間に橋を架ける役割があります。外交的な才能と協調性で組織を支えます。",
    3: "表現者・創造者としての社会的役割。芸術性とコミュニケーション能力で人々に喜びと感動を与える使命があります。エンターテイナーや芸術家として活躍します。",
    4: "建設者・管理者としての社会的使命。計画性と実行力で確実に成果を上げ、社会の基盤を支える役割があります。組織運営や管理職として力を発揮します。",
    5: "冒険者・革新者としての社会的役割。自由な発想と適応力で新しい可能性を開き、変化をもたらす使命があります。営業や企画職で才能を発揮します。",
    6: "世話役・奉仕者としての社会的使命。愛情深く責任感が強い性格で、人々の幸福をサポートする役割があります。教育や福祉分野で活躍します。",
    7: "研究者・専門家としての社会的役割。分析力と洞察力で物事の本質を見抜き、専門知識で社会に貢献する使命があります。学術や技術分野で力を発揮します。",
    8: "実業家・経営者としての社会的使命。組織運営と財務管理に優れ、ビジネスの世界で大きな成功を収める役割があります。企業経営や投資分野で活躍します。",
    9: "奉仕者・人道主義者としての社会的役割。広い視野で人類全体の幸福を考え、社会貢献活動に従事する使命があります。NPOや国際機関で力を発揮します。",
    11: "【マスターナンバー】インスピレーションを与える精神的指導者としての社会的使命。直感力と霊性で人々を導き、高次の意識を伝える役割があります。",
    22: "【マスターナンバー】マスタービルダーとしての社会的役割。大きなビジョンを現実化し、社会インフラや制度を構築する使命があります。",
    33: "【マスターナンバー】マスターティーチャーとしての社会的使命。愛と癒しで人々を導き、人類の精神的進化に貢献する役割があります。",
  },
  soul: {
    1: "独立と自立への強い内面的欲求。自分らしく生きることを何より大切にし、他者に依存することを嫌います。リーダーシップを発揮したいという深い願望があります。",
    2: "愛と調和への深い内面的渇望。平和で安定した人間関係を求め、争いや対立を避けたいと願います。他者との協力関係を築くことに喜びを感じます。",
    3: "創造と表現への情熱的な内面的欲求。自分の才能を世界に示し、人々に喜びを与えたいと強く願います。芸術的な活動や創作に深い満足を感じます。",
    4: "安定と秩序への根深い内面的欲求。確実で信頼できる基盤を築き、予測可能な環境で生活したいと願います。計画的で組織的な生活を好みます。",
    5: "自由と変化への強烈な内面的渇望。束縛を嫌い、常に新しい体験と冒険を求めます。多様性と刺激に満ちた人生を送りたいと願います。",
    6: "愛と奉仕への深い内面的使命感。大切な人を守り、支えることに最大の喜びを感じます。家族や共同体への貢献を通じて自己実現を図ります。",
    7: "真理と知識への探求心に満ちた内面的欲求。物事の本質を理解し、深い洞察を得たいと強く望みます。精神的な成長と自己理解を重視します。",
    8: "成功と達成への野心的な内面的欲求。物質的な豊かさと社会的地位を獲得し、権力と影響力を持ちたいと願います。",
    9: "人類愛と奉仕への情熱的な内面的使命感。世界をより良い場所にし、人類全体の幸福に貢献したいと深く願います。",
    11: "【マスターナンバー】精神的な成長への強い内面的渇望。高次の意識と繋がり、直感的な洞察を得たいと願います。スピリチュアルな体験を重視します。",
    22: "【マスターナンバー】大きな夢の実現への内面的欲求。世界に影響を与える何かを成し遂げ、後世に残る業績を築きたいと思います。",
    33: "【マスターナンバー】無条件の愛の実践への深い内面的使命感。すべての存在を癒し、愛で包みたいという純粋な願望があります。",
  },
  personality: {
    1: "自信に満ち、リーダーシップを発揮する外面的印象。強い意志と決断力を感じさせ、頼りがいのある人として見られます。独立心旺盛で革新的な印象を与えます。",
    2: "優しく協調的な外面的印象。人当たりが良く、信頼できる人として親しまれます。平和主義者で、争いを避ける穏やかな性格として認識されます。",
    3: "明るく魅力的な外面的印象。創造性豊かで楽しい人として多くの人に愛されます。コミュニケーション能力が高く、社交的な人として見られます。",
    4: "真面目で信頼できる外面的印象。堅実で責任感が強い人として高く評価されます。組織的で計画性があり、安定感のある人として認識されます。",
    5: "自由で活動的な外面的印象。エネルギッシュで変化に富んだ人として注目されます。冒険心旺盛で、新しいことに挑戦する人として見られます。",
    6: "温かく世話好きな外面的印象。愛情深く、頼りになる人として多くの人に慕われます。家族思いで責任感が強い人として評価されます。",
    7: "知的で神秘的な外面的印象。深い洞察力を持つ人として尊敬されます。内省的で哲学的な思考を持つ人として認識されます。",
    8: "成功者の風格を持つ外面的印象。権威があり、ビジネスセンスに長けた人として見られます。野心的で実力のある人として評価されます。",
    9: "寛大で人道的な外面的印象。広い心を持つ理想主義者として多くの人に敬愛されます。博愛精神に満ちた人として認識されます。",
    11: "【マスターナンバー】直感的でスピリチュアルな外面的印象。特別な洞察力と感受性を持つ人として見られます。神秘的で霊的な魅力を感じさせます。",
    22: "【マスターナンバー】ビジョナリーな外面的印象。大きな可能性を秘めた人として注目され、将来性を期待されます。実現力のある理想主義者として評価されます。",
    33: "【マスターナンバー】慈愛に満ちた外面的印象。癒しの力を持つ特別な人として敬愛されます。無条件の愛を体現する人として多くの人に慕われます。",
  },
  maturity: {
    1: "人生後半はリーダーシップを発揮し、独立した道を歩みます。自分らしい生き方を貫き、他者を導く役割を果たします。起業や独立事業で成功を収める可能性があります。",
    2: "人生後半は協力と調和を重視し、平和な人間関係を築きます。パートナーシップや協働関係を通じて充実した時間を過ごします。",
    3: "人生後半は創造性を活かし、表現活動で充実した時間を過ごします。芸術や創作活動を通じて自己実現を図り、多くの人に喜びを与えます。",
    4: "人生後半は安定した基盤の上で、堅実な生活を送ります。これまでの努力が実を結び、確固たる地位と財産を築きます。",
    5: "人生後半も自由を愛し、新しい冒険と体験を続けます。旅行や学習を通じて人生を豊かにし、若々しい精神を保ちます。",
    6: "人生後半は家族や共同体への奉仕で、深い満足を得ます。愛する人々に囲まれ、温かい家庭を築いて幸せな老後を送ります。",
    7: "人生後半は精神的な探求を深め、智慧を蓄積します。哲学や宗教的な学びを通じて内面的な充実を図り、賢者として尊敬されます。",
    8: "人生後半は物質的な成功を基盤に、より大きな影響力を持ちます。事業の拡大や社会貢献活動を通じて、レガシーを築きます。",
    9: "人生後半は人道的な活動で、世界への貢献を果たします。慈善活動や社会奉仕を通じて、多くの人々の幸福に寄与します。",
    11: "【マスターナンバー】人生後半は精神的な指導者として、多くの人を導きます。直感力と霊性を活かして、人々の精神的成長をサポートします。",
    22: "【マスターナンバー】人生後半は大きなビジョンを実現し、社会に永続的な影響を与えます。壮大なプロジェクトを完成させ、後世に名を残します。",
    33: "【マスターナンバー】人生後半は愛と癒しの化身として、人類全体に奉仕します。無条件の愛を実践し、多くの人々の心を癒します。",
  },
  birthday: {
    1: "生まれ持った独立心とリーダーシップの才能。新しいアイデアを生み出し、他者を導く能力に長けています。起業や管理職で力を発揮します。",
    2: "生まれ持った協調性と調整能力の才能。人間関係を円滑にし、チームワークを重視する能力があります。外交や人事分野で活躍します。",
    3: "生まれ持った創造性と表現力の才能。芸術的センスとコミュニケーション能力に優れています。エンターテイメントや広告業界で力を発揮します。",
    4: "生まれ持った組織力と実行力の才能。計画的で着実に物事を進める能力があります。管理業務や建設業界で活躍します。",
    5: "生まれ持った自由な発想と適応力の才能。変化を恐れず、新しい環境に素早く適応する能力があります。営業や企画職で力を発揮します。",
    6: "生まれ持った愛情深さと責任感の才能。人を支え、世話をする能力に長けています。教育や医療分野で活躍します。",
    7: "生まれ持った分析力と洞察力の才能。物事を深く考察し、本質を見抜く能力があります。研究や技術分野で力を発揮します。",
    8: "生まれ持ったビジネスセンスと組織運営の才能。財務管理と事業拡大の能力に優れています。経営や投資分野で活躍します。",
    9: "生まれ持った博愛精神と奉仕の才能。人類全体の幸福を考え、社会貢献する能力があります。福祉や国際協力分野で力を発揮します。",
    10: "生まれ持った完成度の高い才能。多方面にわたる能力を持ち、バランスの取れた人格を形成します。様々な分野で成功を収める可能性があります。",
    11: "【マスターナンバー】生まれ持った直感力と霊性の特別な才能。高次の意識と繋がり、人々にインスピレーションを与える能力があります。",
    12: "生まれ持った表現力と創造性の才能。芸術的センスと人を楽しませる能力に長けています。クリエイティブな分野で活躍します。",
    13: "生まれ持った変革力と再生の才能。困難を乗り越え、新しい可能性を創造する能力があります。変化の時代に力を発揮します。",
    14: "生まれ持った自由と冒険の才能。束縛を嫌い、新しい体験を求める能力があります。旅行や国際的な仕事で活躍します。",
    15: "生まれ持った愛と調和の才能。家族や共同体を大切にし、平和をもたらす能力があります。家庭や地域社会で力を発揮します。",
    16: "生まれ持った精神性と洞察力の才能。内面的な成長を重視し、真理を探求する能力があります。哲学や宗教分野で活躍します。",
    17: "生まれ持った実現力と組織力の才能。大きな目標を達成し、成功を収める能力があります。ビジネスや政治分野で力を発揮します。",
    18: "生まれ持った人道主義と奉仕の才能。世界的な視野で社会貢献する能力があります。国際機関や慈善団体で活躍します。",
    19: "生まれ持った独立心と完成度の才能。自立して目標を達成し、完璧を追求する能力があります。専門分野で頂点を極めます。",
    20: "生まれ持った協調性と感受性の才能。人の気持ちを理解し、調和をもたらす能力があります。カウンセリングや芸術分野で活躍します。",
    21: "生まれ持った創造性と成功の才能。芸術的センスとビジネスセンスを併せ持ちます。エンターテイメント業界で大成功を収めます。",
    22: "【マスターナンバー】生まれ持ったマスタービルダーの特別な才能。大きなビジョンを現実化し、社会に永続的な影響を与える能力があります。",
    23: "生まれ持った表現力と冒険心の才能。自由な発想で新しい可能性を開拓する能力があります。メディアや広告業界で活躍します。",
    24: "生まれ持った愛情と責任感の才能。家族や共同体を支え、安定をもたらす能力があります。教育や福祉分野で力を発揮します。",
    25: "生まれ持った洞察力と精神性の才能。深い理解力で物事の本質を見抜く能力があります。学術や研究分野で活躍します。",
    26: "生まれ持ったビジネスセンスと実現力の才能。大きな事業を成功に導く能力があります。企業経営や投資分野で力を発揮します。",
    27: "生まれ持った人道主義と指導力の才能。人類全体の幸福を考え、多くの人を導く能力があります。社会運動や教育分野で活躍します。",
    28: "生まれ持った独立心と実現力の才能。自分の道を切り開き、成功を収める能力があります。起業や独立事業で力を発揮します。",
    29: "生まれ持った直感力と奉仕の才能。高次の意識で人々を導き、癒しをもたらす能力があります。スピリチュアルな分野で活躍します。",
    30: "生まれ持った表現力と創造性の才能。芸術的センスと人を楽しませる能力に長けています。エンターテイメント業界で成功します。",
    31: "生まれ持った組織力と実現力の才能。計画的に目標を達成し、確実な成果を上げる能力があります。管理職や建設業界で活躍します。",
  },
}

// 完全な数秘術分析
export function calculateNumerology(fullName: string, birthdate?: Date): NumerologyResult {
  const lifePathNumber = birthdate ? calculateLifePathNumber(birthdate) : 0
  const destinyNumber = calculateDestinyNumber(fullName)
  const soulNumber = calculateSoulNumber(fullName)
  const personalityNumber = calculatePersonalityNumber(fullName)
  const maturityNumber = birthdate ? calculateMaturityNumber(lifePathNumber, destinyNumber) : 0
  const birthdayNumber = birthdate ? calculateBirthdayNumber(birthdate) : 0

  return {
    lifePathNumber,
    destinyNumber,
    soulNumber,
    personalityNumber,
    maturityNumber,
    birthdayNumber,
    interpretations: {
      lifePath:
        INTERPRETATIONS.lifePath[lifePathNumber as keyof typeof INTERPRETATIONS.lifePath] || "計算できませんでした",
      destiny: INTERPRETATIONS.destiny[destinyNumber as keyof typeof INTERPRETATIONS.destiny] || "計算できませんでした",
      soul: INTERPRETATIONS.soul[soulNumber as keyof typeof INTERPRETATIONS.soul] || "計算できませんでした",
      personality:
        INTERPRETATIONS.personality[personalityNumber as keyof typeof INTERPRETATIONS.personality] ||
        "計算できませんでした",
      maturity:
        INTERPRETATIONS.maturity[maturityNumber as keyof typeof INTERPRETATIONS.maturity] || "計算できませんでした",
      birthday:
        INTERPRETATIONS.birthday[birthdayNumber as keyof typeof INTERPRETATIONS.birthday] || "計算できませんでした",
    },
  }
}
